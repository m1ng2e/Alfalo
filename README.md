# Alfalo
Alfalo is an **A**ny**L**ogic Library for **Fa**st **L**ay**o**ut Generation. It provides a easy way to generate complex layout programmatically in AnyLogic Models. 

There are two main features: `Rectangular Node/Node Group Manipulation` and `Fast Path Generation`.

**Rectangular Node/Node Group Manipulation**:

Manipulation of rectangular nodes and node groups means applying flipping and rotation on defined prototypes around their origin. In lots of complex layouts, there are rectangular nodes and node groups that are the same but are just manipulated in some way. For example, in manufacturing settings, stations (rectangular node) and centers (node group) that are essentially the same are replicated across the plant. The Alfalo library enables the users to define prototypes for rectangular nodes and node groups, so that new rectangular nodes and node groups can be easily generated by specifying the position and the manipulation of the corresponding prototype, as shown in Figure 1 and 2. In some cases where instead of rectangular node/node group manipulation, user prefers to use AnyLogic's node constructor to generate rectangular nodes, the Alfalo library would also support it with no problem. **Note: When manipulating rectangular nodes and node groups, flipping operations will by default happen before rotation operations.**

<img src="https://github.com/m1ng2e/Alfalo/assets/62451645/dc666560-db1d-44e9-8c20-6581a0ce94be" width="600" height="250">

*Figure 1: Rectangular Node Manipulation*

<img src="https://github.com/m1ng2e/Alfalo/assets/62451645/f3e631c6-2a5b-40b6-b0f4-ac8cd2f60e67" width="600" height="250">

*Figure 2: Node Group Manipulation*

**Fast Path Generation**:

Rather than defining paths one by one and specifying source and target for each path, like how it is normally done in AnyLogic, the Alfalo library enables easy paths generation by requiring the users to define less (Alfalo) paths. When an Alfalo path is defined to cross one or more rectangular nodes, multiple paths connecting the rectangular nodes will be automatically generated, as shown in Figure 3. When two Alfalo paths are defined to cross each other, four paths connected by a point node will be automatically generated, as shown in Figure 4. The library will automatically figure out the source and target of each generated path.

<img src="https://github.com/m1ng2e/Alfalo/assets/62451645/4c7f804d-045d-40be-b33e-04c63face41e" width="700" height="230">

*Figure 3: Alfalo Path Crossing Rectangular Nodes*

<img src="https://github.com/m1ng2e/Alfalo/assets/62451645/895da81c-bd45-4a7a-b84d-30ea51efe576" width="600" height="250">

*Figure 4: Alfalo Paths Crossing Each Other*

## Getting Started

## Example Implementation

The following code generates the layout in Figure 5.

<img src="https://github.com/m1ng2e/Alfalo/assets/62451645/81716939-5e5e-420c-8d9c-67d783fddb0c" width="450" height="300">

*Figure 5: Example Layout*

```
//Generate a rectangular node with AnyLogic node constructor
RectangularNode rn = new RectangularNode();
rn.setSize(220, 120);
rn.setPos(-110, -60, 0);
Attractor a = new Attractor(100, 20, 30);
rn.addAttractor(a);
Alfalo.putRectangularNode(rn);

//Define a node group with two rectangular nodes in it
Alfalo.addNodeGroupPrototype("My node group", 300, 200);
Alfalo.addRectangularNodePrototype("My rectangular node 1", 30, 60);
Alfalo.addAttractorToRectangularNodePrototype("My rectangular node 1", 20, 40, 0);
Alfalo.addRectangularNodePrototype("My rectangular node 2", 10, 30);
Alfalo.addAttractorToRectangularNodePrototype("My rectangular node 2", 8, 20, 0);
Alfalo.addRectangularNodeToNodeGroupPrototype("My node group", "My rectangular node 1", 200., 100., true, false, 90);
Alfalo.addRectangularNodeToNodeGroupPrototype("My node group", "My rectangular node 2", 100, 100, false, false, 0);

//Manipulate and place four instances of the node group into the layout
ArrayList<RectangularNode> rn_list = Alfalo.putNodeGroup("My node group", 0, 0, true, true, 0);
rn_list.addAll(Alfalo.putNodeGroup("My node group", 0, 0, false, false, 0));
rn_list.addAll(Alfalo.putNodeGroup("My node group", 0, 0, true, false, 0));
rn_list.addAll(Alfalo.putNodeGroup("My node group", 0, 0, false, true, 0));

//Manipulate and place two instances of the rectangular node into the layout
rn_list.add(Alfalo.putRectangularNode("My rectangular node 1", -140, 15, true, false, 90));
rn_list.add(Alfalo.putRectangularNode("My rectangular node 1", 200, -15, false, false, 90));

//Add Alfalo Paths
double[][] alf_paths = new double[][] {{-170, -115, -170, 115, 170, 115, 170, -115, -170, -115},
                                      {0, -115, 0, 115},
                                      {-105, -100, -105, 100},
                                      {105, -100, 105, 100},
                                      {-170, -85, 170, -85},
                                      {-170, 85, 170, 85},
                                      {-170, 0, 170, 0}};
for (double[] alf_path: alf_paths){
	Alfalo.addAlfaloPath(alf_path, false);
	}
	
//Generate Layout
presentation.add(Alfalo.generateLayout(this, "myNetwork", "myLevel", SHAPE_DRAW_2D3D, 0, false));

//Initialize triangle agents to show attractors in nodes
for (RectangularNode RN: rn_list){
	Circle c = new Circle();
	c.goToPopulation(circles);
	c.jumpTo(RN);
	}
```



